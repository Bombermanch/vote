"use strict";var progressBarCats=document.querySelector(".progress__bar_cats"),progressBarDogs=document.querySelector(".progress__bar_dogs"),progressBarParrots=document.querySelector(".progress__bar_parrots"),btn=document.querySelectorAll(".btn"),catsCounter=document.querySelector(".progress__num_cats"),dogsCounter=document.querySelector(".progress__num_dogs"),parrotsCounter=document.querySelector(".progress__num_parrots"),progress=document.querySelector(".progress"),url=new URL("https://sf-pyw.mosyag.in/sse/vote"),stats=url+"/stats",voteCatsUrl=url+"/cats",voteDogsUrl=url+"/dogs",voteParrotsUrl=url+"/parrots",header=new Headers({"Access-Control-Allow-Credentials":!0,"Access-Control-Allow-Origin":"*"}),ES=new EventSource(stats,header);function vote(t){fetch(t,{method:"POST",body:"",mode:"no-cors"}).then(alert("Ваш голос принят!"))}ES.onerror=function(t){ES.readyState&&(progress.textContent="Some error")},ES.onmessage=function(t){var r=JSON.parse(t.data),o=r.cats,e=r.dogs,s=r.parrots,n=o+e+s;progressBarCats.style.width="".concat(o/n*100,"%"),progressBarDogs.style.width="".concat(e/n*100,"%"),progressBarParrots.style.width="".concat(s/n*100,"%"),catsCounter.innerText="Кошки: ".concat(r.cats," (").concat((r.cats/n*100).toFixed(2),"%)"),dogsCounter.innerText="Собаки: ".concat(r.dogs,"  (").concat((r.dogs/n*100).toFixed(2),"%)"),parrotsCounter.innerText="Попугаи: ".concat(r.parrots,"  (").concat((r.parrots/n*100).toFixed(2),"%)")};for(var _loop=function(t){btn[t].addEventListener("click",(function(){btn[t].classList.contains("btn_cats")?vote(voteCatsUrl):btn[t].classList.contains("btn_dogs")?vote(voteDogsUrl):btn[t].classList.contains("btn_parrots")&&vote(voteParrotsUrl)}))},i=0;i<btn.length;i++)_loop(i);